#!/usr/bin/env bash
# Configures a new ubuntu machine 
# INSTALLING Nginx on port 80

echo -e "Installing Nginx...\n"
sudo apt-get update -y -qq && sudo apt-get install nginx -y

# Ensure Nginx is running
sudo service nginx start

# Allow traffic on port 80
sudo ufw allow 'Nginx HTTP'

# Replace the default index.html with the required content
echo "Holberton School" | sudo tee /var/www/html/index.html > /dev/null

# Restart Nginx using service (not systemctl)
sudo service nginx restart

# Verify if Nginx is serving the expected content
echo -e "Checking Nginx response:\n"
curl -s localhost | grep "Holberton School" && echo "Setup successful!" || echo "Error: Nginx is not serving the correct content."

echo -e "\nConfiguration completed!"

